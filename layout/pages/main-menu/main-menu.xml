<root>
	<styles>
		<include src="file://{resources}/styles/main.scss" />
	</styles>
	<scripts>
		<include src="file://{scripts}/common/dev.ts" />
		<include src="file://{scripts}/pages/main-menu/main-menu.ts" />
		<include src="file://{scripts}/pages/main-menu/menu-transformer.ts" />
		<include src="file://{scripts}/pages/campaigns/campaign-chapters.ts" />
		<include src="file://{scripts}/util/dosa.ts" />
	</scripts>

	<snippets>
		<snippet name="MainMenuMovieSnippet">
			<Panel>
				<Movie
					id="MainMenuMovie"
					class="mainmenu__movie MainMenuModeOnly"
					src=""
					sound=""
					controls="none"
					repeat="true"
					hittest="false"
				>
				</Movie>
			</Panel>
		</snippet>
	</snippets>

	<MainMenu class="InitialDisplay MainMenuRootPanel" hittest="false" onload="MainMenu.onMainMenuLoaded()">
		<!-- Vanity is not used but the engine needs this to exist -->
		<Panel id="MainMenuVanityParent" />

		<Panel id="MainMenuInput" class="mainmenu" onfocus="MainMenu.onMainMenuFocused()">
			<!-- Full page blur: used to blur everything below the drawer -->
			<Panel class="mainmenu__container">
				<!-- Movie background -->
				<Panel id="MainMenuMovieParent" class="mainmenu__background MainMenuModeOnly" />
				<!-- Static image background -->
				<Image id="MainMenuBackground" class="mainmenu__background MainMenuModeOnly" />

				<!-- Backbuffer blur: used to blur the backbuffer in the pause menu -->
				<BaseBlurTarget
					id="PauseMenuMainMenuBlur"
					class="mainmenu__pause-blur PauseMenuModeOnly"
					blurrects="PauseMenuMainMenuContent"
				>
					<!-- Backbuffer background -->
					<BackbufferImagePanel class="mainmenu__background PauseMenuModeOnly" />
				</BaseBlurTarget>

				<Panel id="PauseMenuMainMenuContent" class="mainmenu__pause-content-blur" />

				<Panel id="MenuContentRoot" class="mainmenu__content">
					<Panel id="PageBg" class="mainmenu__page-bg" />

					<Panel id="GradientBar" class="mainmenu__gradient-bar">
						<Image
							class="mainmenu__gradient-bar__grid1"
							src="file://{images}/menu/menu_grid1.svg"
							scaling="stretch-to-fit-preserve-aspect"
							hittest="false"
						/>
						<Image
							class="mainmenu__gradient-bar__grid2"
							src="file://{images}/menu/menu_grid2.svg"
							scaling="stretch-to-fit-preserve-aspect"
							hittest="false"
						/>
						<Panel id="HomeControls" class="mainmenu__nav">
							<Panel class="mainmenu__nav__top">
								<Image
									id="GameFullLogo"
									class="mainmenu__logo"
									src="file://{images}/logo.svg"
									scaling="stretch-to-fit-preserve-aspect"
								/>
							</Panel>
							<Panel class="mainmenu__nav__controls__wrapper">
								<Panel class="mainmenu__nav__controls" childfocusonhover="true">
									<!-- Play/Select Campaign/Gamemode (NOT Campaign Mode / Main Menu) -->
									<Button
										id="PlayBtn"
										class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly NoCampaignSelectedOnly"
										onactivate="MainMenu.navigateToPage('Play', 'play-menu/main')"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Play" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_Navigation_Play_Tagline" />
										</Panel>
									</Button>
									<!-- Resume Game (in-game) -->
									<Button
										id="ResumeBtn"
										class="mainmenu__nav__btn mainmenu__nav__btn__lined PauseMenuModeOnly"
										onactivate="$.DispatchEvent('MainMenuResumeGame');"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text" text="#MainMenu_Home_Resume" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_Home_Resume_Tagline" />
										</Panel>
									</Button>
									<!-- Start New Game (Campaign Mode / in-game) -->
									<Button
										id="NewGameBtn"
										class="mainmenu__nav__btn mainmenu__nav__btn__lined CampaignSelectedOnly"
										onactivate="MainMenu.navigateToPage('NewGame', 'campaigns/new-game')"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text" text="#MainMenu_Campaigns_MM_NewGame" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_Campaigns_MM_NewGame_Tagline" />
										</Panel>
									</Button>
									<!-- Continue Latest Save -->
									<!-- When not in Campaign mode, it picks the latest save by time -->
									<!-- When in Campaign mode, it picks latest save filtered by current Campaign -->
									<Button
										id="CampaignContinueBtn"
										class="mainmenu__nav__btn mainmenu__nav__btn__lined mainmenu__nav__btn__no-gradient"
										onactivate=""
										onmouseover="MainMenu.onContinueMouseOver()"
										onmouseout="MainMenu.onContinueMouseOut()"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text MainMenuModeOnly CampaignSelectedOnly" text="#MainMenu_Campaigns_MM_LoadAuto" />
											<Label class="mainmenu__nav__btn__text MainMenuModeOnly NoCampaignSelectedOnly" text="#MainMenu_Campaigns_MM_Resume" />
											<Label id="ContinueCampaignText" class="mainmenu__nav__btn__small-text MainMenuModeOnly" text="[PH] ????" />
											<Label class="mainmenu__nav__btn__text PauseMenuModeOnly" text="#MainMenu_SaveRestore_LoadAuto" />
											<Label class="mainmenu__nav__btn__small-text PauseMenuModeOnly" text="#MainMenu_SaveRestore_LoadAuto_Tagline" />
										</Panel>
									</Button>
									<!-- Save/Load Game (Campaign Mode / in-game) -->
									<Button
										id="LoadGameBtn"
										class="mainmenu__nav__btn mainmenu__nav__btn__lined CampaignSelectedOnly"
										onactivate="MainMenu.navigateToPage('GameSaves', 'campaigns/saves-list')"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text MainMenuModeOnly" text="#MainMenu_SaveRestore_Load" />
											<Label class="mainmenu__nav__btn__text PauseMenuModeOnly" text="#MainMenu_SaveRestore_Main" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_SaveRestore_Main_Tagline" />
										</Panel>
									</Button>
									<!-- Addons/Mounts -->
									<Button
										class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly NoCampaignSelectedOnly"
										onactivate="MainMenu.navigateToPage('Content', 'main-menu/addons')"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Addons" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_Navigation_Addons_Tagline" />
										</Panel>
									</Button>
									<!-- Settings -->
									<Button
										class="mainmenu__nav__btn mainmenu__nav__btn__lined"
										onactivate="MainMenu.navigateToPage('Settings', 'settings/settings')"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Options" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_Navigation_Options_Tagline" />
										</Panel>
									</Button>
									<!-- Exit Campaign Mode -->
									<Button
										class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly CampaignSelectedOnly"
										onactivate="MainMenuCampaignMode.exitCampaign()"
										tabindex="auto"
										selectionpos="auto"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Disconnect" />
											<Label class="mainmenu__nav__btn__small-text" text="#MainMenu_Navigation_Disconnect_CM_Tagline" />
										</Panel>
									</Button>
									<!-- Quit/Disconnect -->
									<Button
										id="QuitBtn"
										class="mainmenu__nav__btn NoCampaignSelectedOnly"
										onactivate="MainMenu.onQuitButtonPressed()"
										tabindex="auto"
										selectionpos="auto"
										onmovedown="MainMenu.tryNavigateFeatured()"
									>
										<Panel class="vertical-align-center flow-down">
											<Label class="mainmenu__nav__btn__text MainMenuModeOnly" text="#MainMenu_Navigation_QuitGame" />
											<Label class="mainmenu__nav__btn__small-text MainMenuModeOnly" text="#MainMenu_Navigation_QuitGame_Tagline" />
											<Label class="mainmenu__nav__btn__text PauseMenuModeOnly" text="#MainMenu_Navigation_Disconnect" />
											<Label class="mainmenu__nav__btn__small-text PauseMenuModeOnly" text="#MainMenu_Navigation_Disconnect_Tagline" />
										</Panel>
									</Button>
								</Panel>
							</Panel>
						</Panel>
						<Button
							id="FeaturedBtn"
							class="mainmenu__featured__button"
							onactivate="MainMenu.navigateToPage('Featured', 'featured/main')"
							tabindex="auto"
							selectionpos="auto"
							onmoveup="MainMenu.tryNavigateUpFeatured()"
							onmovedown="MainMenu.tryNavigateDownFeatured()"
						>
							<Image
								id="FeaturedImage"
								class="mainmenu__featured__image"
								src="file://{images}/menu/p2ce-generic.png"
								scaling="stretch-to-cover-preserve-aspect"
							/>
							<Panel class="mainmenu__featured__overlay" />
							<Panel class="mainmenu__featured__content">
								<AvatarImage id="FeaturedAvatar" class="mainmenu__featured__content__avatar" />
								<Panel class="flow-down vertical-align-center">
									<Label class="mainmenu__featured__content__header" text="[PH] Major Feature" />
									<Label class="mainmenu__featured__content__subheader" text="[PH] Author" />
								</Panel>
							</Panel>
						</Button>
					</Panel>

					<VersionInfo class="mainmenu__version" />

					<Panel id="ContinueBox" class="mainmenu__display-box" hittest="false" hittestchildren="false">
						<Panel>
							<Image
								id="ContinueSaveThumb"
								class="mainmenu__display-box__img"
								src="file://{images}/menu/p2ce/random4.png"
								textureheight="1920"
								texturewidth="1080"
								scaling="stretch-to-cover-preserve-aspect"
							/>
							<Image
								id="ContinueSaveLogo"
								class="mainmenu__display-box__logo"
								src="file://{images}/menu/portal2/logo.svg"
								textureheight="64"
								texturewidth="64"
								scaling="stretch-to-cover-preserve-aspect"
							/>
						</Panel>
						<Panel class="mainmenu__display-box__details">
							<Label id="ContinueSaveHeadline" class="mainmenu__display-box__head" text="[PH] Head" />
							<Label id="ContinueSaveTagline" class="mainmenu__display-box__tagline" text="[PH] Tagline" />
						</Panel>
					</Panel>

					<ModelPanel
						id="MainMenuModel"
						class="mainmenu__modelpanel MainMenuModeOnly"
						src="models/npcs/turret/turret.mdl"
						cubemap="cubemaps/cubemap_menu_model_bg.hdr"
						antialias="true"
						mouse_rotate="true"
					/>

					<Panel id="PageWrap" class="mainmenu__normal-page-container">
						<Label
							id="PageHeadline"
							class="mainmenu__page-head mainmenu__page-controls mainmenu__page-controls__t-prop"
							text="[PH] Page Headline"
						/>
						<Label
							id="PageTagline"
							class="mainmenu__page-tagline mainmenu__page-controls mainmenu__page-controls__t-prop"
							text="[PH] Page Tagline"
						/>

						<Panel id="PageInsert" class="mainmenu__page-insert" />

						<Panel id="PageActions" class="mainmenu__page-actions mainmenu__page-controls mainmenu__page-controls__t-prop">
							<Button class="button" onactivate="MainMenu.navigateBack()" tabindex="auto" selectionpos="auto">
								<Label class="button__text" text="Back" />
							</Button>
						</Panel>
					</Panel>
				</Panel>
				<Label id="DevCampaign" class="mainmenu__devtext" text="[DEV] No campaign active" />

				<!-- Backbuffer blur: used to blur the backbuffer in the pause menu -->
				<BaseBlurTarget
					id="SwitcherBlur"
					class="mainmenu__switcher-blur MainMenuModeOnly"
					blurrects="SwitcherBlurContent"
					hittest="false"
				>
					<!-- Backbuffer background -->
					<BackbufferImagePanel class="mainmenu__background MainMenuModeOnly" hittest="false" />
				</BaseBlurTarget>

				<Panel id="SwitcherBlurContent" class="mainmenu__pause-content-blur" hittest="false" />

				<Label id="LoadingIndicator" class="loading-indicator" text="#MainMenu_Loading" />
			</Panel>
		</Panel>

		<!-- Make sure these are at the bottom to get the z-order right -->
		<PopupManager id="PopupManager" onpopupsdismissed="" />
		<ContextMenuManager id="ContextMenuManager" />
		<TooltipManager id="TooltipManager" hittest="false" />

		<!-- Doesn't actually include the notifications, but we use its position to figure out where to show them -->
		<Panel id="SteamNotificationsPlaceholder" hittest="false" />
	</MainMenu>
</root>
