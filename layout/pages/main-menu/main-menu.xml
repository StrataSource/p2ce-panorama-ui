<root>
	<styles>
		<include src="file://{resources}/styles/main.scss" />
	</styles>
	<scripts>
		<include src="file://{scripts}/common/dev.ts" />
		<include src="file://{scripts}/pages/main-menu/main-menu.ts" />
		<include src="file://{scripts}/pages/main-menu/menu-transformer.ts" />
		<include src="file://{scripts}/pages/campaigns/campaign-chapters.ts" />
		<include src="file://{scripts}/util/dosa.ts" />
	</scripts>

	<snippets>
		<snippet name="MainMenuMovieSnippet">
			<Panel>
				<Movie
					id="MainMenuMovie"
					class="mainmenu__movie MainMenuModeOnly"
					src=""
					sound=""
					controls="none"
					repeat="true"
					hittest="false"
				>
				</Movie>
			</Panel>
		</snippet>
	</snippets>

	<MainMenu
		class="InitialDisplay MainMenuRootPanel"
		hittest="false"
		onload="MainMenu.onMainMenuLoaded()"
	>
		<!-- Vanity is not used but the engine needs this to exist -->
		<Panel id="MainMenuVanityParent" />

		<Panel id="MainMenuInput" class="mainmenu">
			

			<!-- Full page blur: used to blur everything below the drawer -->
			<Panel class="mainmenu__container">
				<!-- Movie background -->
				<Panel id="MainMenuMovieParent" class="mainmenu__background MainMenuModeOnly" />
				<!-- Static image background -->
				<Image id="MainMenuBackground" class="mainmenu__background MainMenuModeOnly" />
				<!-- Backbuffer blur: used to blur the backbuffer in the pause menu -->
				<BaseBlurTarget id="PauseMenuMainMenuBlur" class="mainmenu__pause-blur" blurrects="PauseMenuMainMenuContent">
					<!-- Backbuffer background -->
					<BackbufferImagePanel class="mainmenu__background PauseMenuModeOnly" />
				</BaseBlurTarget>

				<Panel id="PauseMenuMainMenuContent" class="mainmenu__pause-content-blur" />

				<Panel id="MenuContentRoot" class="mainmenu__content">
					<Label id="DevCampaign" class="mainmenu__devtext" text="[DEV] No Campaign Active" />

					<Panel id="GradientBar" class="mainmenu__gradient-bar">
						
						<Panel id="HomeControls" class="mainmenu__nav">
							<Panel class="mainmenu__nav__top">
								<ModelPanel
									id="MainMenuModel"
									class="mainmenu__modelpanel MainMenuModeOnly"
									src="models/npcs/turret/turret.mdl"
									cubemap="cubemaps/cubemap_menu_model_bg.hdr"
									antialias="true"
									mouse_rotate="true"
								/>
								<Image
									id="GameFullLogo"
									class="mainmenu__logo"
									src="file://{images}/logo.svg"
									scaling="stretch-to-fit-x-preserve-aspect"
								/>
							</Panel>
							<Panel class="mainmenu__nav__controls">
								<!-- Featured Hub (NOT Campaign Mode / Main Menu) -->
								<Button
									class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly NoCampaignSelectedOnly"
									onactivate="MainMenu.navigateToPage('Featured', 'main-menu/placeholder')"
								>
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="[HC] Featured" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Explore highlighted workshop content" />
									</Panel>
								</Button>
								<!-- Play/Select Campaign/Gamemode (NOT Campaign Mode / Main Menu) -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly NoCampaignSelectedOnly" onactivate="MainMenu.navigateToPage('Play', 'play-menu/main')">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Play" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Start a new experience" />
									</Panel>
								</Button>
								<!-- Resume Game (in-game) -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined PauseMenuModeOnly" onactivate="$.DispatchEvent('MainMenuResumeGame');">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="#MainMenu_Home_Resume" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Close this menu &amp; return to the game" />
									</Panel>
								</Button>
								<!-- Start New Game (Campaign Mode / in-game) -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined CampaignSelectedOnly" onactivate="MainMenu.navigateToPage('NewGame', 'campaigns/new-game')">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="#MainMenu_Campaigns_MM_NewGame" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Configure &amp; start a new game" />
									</Panel>
								</Button>
								<!-- Continue Latest Save -->
								<!-- When not in Campaign mode, it picks the latest save by time -->
								<!-- When in Campaign mode, it picks latest save filtered by current Campaign -->
								<Button
									id="CampaignContinueBtn"
									class="mainmenu__nav__btn mainmenu__nav__btn__lined mainmenu__nav__btn__no-gradient"
									onactivate=""
									onmouseover="MainMenu.onContinueMouseOver()"
									onmouseout="MainMenu.onContinueMouseOut()"
								>
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text MainMenuModeOnly" text="#MainMenu_Campaigns_MM_LoadAuto" />
										<Label id="ContinueCampaignText" class="mainmenu__nav__btn__small-text MainMenuModeOnly" text="[PH] ????" />
										<Label class="mainmenu__nav__btn__text PauseMenuModeOnly" text="#MainMenu_SaveRestore_LoadAuto" />
										<Label class="mainmenu__nav__btn__small-text PauseMenuModeOnly" text="[HC] Load the latest save file" />
									</Panel>
								</Button>
								<!-- Save/Load Game (Campaign Mode / in-game) -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined CampaignSelectedOnly" onactivate="MainMenu.navigateToPage('GameSaves', 'campaigns/saves-list')">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text MainMenuModeOnly" text="#MainMenu_SaveRestore_Load" />
										<Label class="mainmenu__nav__btn__text PauseMenuModeOnly" text="#MainMenu_SaveRestore_Main" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Manage game save files" />
									</Panel>
								</Button>
								<!-- Addons/Mounts -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly" onactivate="MainMenu.navigateToPage('Content', 'main-menu/addons')">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Addons" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Manage subscriptions &amp; mounted games" />
									</Panel>
								</Button>
								<!-- Settings -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined" onactivate="MainMenu.navigateToPage('Settings', 'settings/settings')">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="#MainMenu_Navigation_Options" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Tweak keybinds, video, preferences, etc." />
									</Panel>
								</Button>
								<!-- Exit Campaign Mode -->
								<Button class="mainmenu__nav__btn mainmenu__nav__btn__lined MainMenuModeOnly CampaignSelectedOnly" onactivate="MainMenuCampaignMode.exitCampaign()">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text" text="[HC] Return" />
										<Label class="mainmenu__nav__btn__small-text" text="[HC] Exit the experience" />
									</Panel>
								</Button>
								<!-- Quit/Disconnect -->
								<Button class="mainmenu__nav__btn" onactivate="MainMenu.onQuitButtonPressed()">
									<Panel class="vertical-align-center flow-down">
										<Label class="mainmenu__nav__btn__text MainMenuModeOnly" text="#MainMenu_Navigation_QuitGame" />
										<Label class="mainmenu__nav__btn__small-text MainMenuModeOnly" text="[HC] Leave to test another day" />
										<Label class="mainmenu__nav__btn__text PauseMenuModeOnly" text="#MainMenu_Navigation_Disconnect" />
										<Label class="mainmenu__nav__btn__small-text PauseMenuModeOnly" text="[HC] Return to the main menu or quit the game" />
									</Panel>
								</Button>
							</Panel>
							<VersionInfo class="mainmenu__version" />
						</Panel>
					</Panel>

					<Panel id="ContinueBox" class="mainmenu__display-box">
						<Panel>
							<Image
								id="ContinueSaveThumb"
								class="mainmenu__display-box__img"
								src="file://{images}/menu/p2ce/random4.png"
								textureheight="1920"
								texturewidth="1080"
								scaling="stretch-to-cover-preserve-aspect"
							/>
							<Image
								id="ContinueSaveLogo"
								class="mainmenu__display-box__logo"
								src="file://{images}/menu/portal2/logo.png"
								textureheight="64"
								texturewidth="64"
								scaling="stretch-to-cover-preserve-aspect"
							/>
						</Panel>
						<Panel class="mainmenu__display-box__details">
							<Label id="ContinueSaveHeadline" class="mainmenu__display-box__head" text="[PH] Head" />
							<Label id="ContinueSaveTagline" class="mainmenu__display-box__tagline" text="[PH] Tagline" />
						</Panel>
					</Panel>

					<Panel id="PageWrap" class="mainmenu__normal-page-container">
						<Label id="PageHeadline" class="mainmenu__page-head mainmenu__page-controls mainmenu__page-controls__t-prop" text="[PH] Page Headline" />
						<Label id="PageTagline" class="mainmenu__page-tagline mainmenu__page-controls mainmenu__page-controls__t-prop" text="[PH] Page Tagline" />

						<Panel id="PageInsert" class="mainmenu__page-insert" />

						<Panel id="PageActions" class="mainmenu__page-actions mainmenu__page-controls mainmenu__page-controls__t-prop">
							<Button class="button-mono" onactivate="MainMenu.navigateBack()">
								<Label class="button-mono__text" text="Back" />
							</Button>
						</Panel>
					</Panel>
				</Panel>
			</Panel>
		</Panel>

		<!-- Make sure these are at the bottom to get the z-order right -->
		<PopupManager id="PopupManager" onpopupsdismissed="" />
		<ContextMenuManager id="ContextMenuManager" />
		<TooltipManager id="TooltipManager" hittest="false" />

		<!-- Doesn't actually include the notifications, but we use its position to figure out where to show them -->
		<Panel id="SteamNotificationsPlaceholder" hittest="false" />
	</MainMenu>
</root>
